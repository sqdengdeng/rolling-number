function n(n,e){for(var t=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector,i=n;i&&i.removeChild;){if(t.call(i,e))return i;if((i=i.parentElement)&&i.tagName&&"html"===i.tagName.toLowerCase())return null}return null}function e(n){return document.querySelector(n)}function t(n){return n?n>999999?"99.9万":n>=1e4?(n/1e4).toFixed(1)+"万":n:"推荐"}function i(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function a(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}a(".num {\n  height: 0.3rem;\n  position: relative;\n  display: inline-block;\n  overflow: hidden;\n}\n.num span {\n  display: inline-block;\n  line-height: 0.3rem;\n  text-align: center;\n  overflow: hidden;\n  position: relative;\n  top: -0.3rem;\n}\n.num i {\n  height: 0.3rem;\n  display: block;\n  text-align: center;\n  font-style: normal;\n}\n.negative {\n  height: 0.3rem;\n  display: inline-block;\n  vertical-align: bottom;\n}\n");var o,s=(o="String",function(n){return o===Object.prototype.toString.call(n).slice(8,-1)});function c(n){var e=n.selector,t=n.num,i=void 0===t?"":t,r=n.direction,a=void 0===r?"up":r;if(function(n){return"number"==typeof n&&!Object.is(n,NaN)}(+i)){var o,c=(o=+i)>=1e4?(o/1e4).toFixed(1)+"万":o;if(s(c)){if(0===c.length)return;if(/万/g.test(c))return}var u="",m=document.querySelector(e);if(0===c)return m.innerHTML='<div class="num"><span><i>-1</i><i>0</i><i>1</i></span></div>',void(m.querySelector(".num span").style.transform="translate(0, ".concat("up"===a?-.3:.3,"rem)"));if(-1===c)return m.innerHTML='<div class="num"><span><i>-2</i><i>-1</i><i>0</i></span></div>',void(m.querySelector(".num span").style.transform="translate(0, ".concat("up"===a?-.3:.3,"rem)"));var p=String(c).split(""),f="up"===a?c+1:c-1,g=String(f).split(""),v="positive";c<0&&f<0&&(g=g.slice(1),p=p.slice(1),v="negative"),p.length<g.length&&p.unshift("firstNull"),p.length>g.length&&(p[0]="firstOne");for(var h=function(n,e){var t=[];if(n.length===e.length){for(var i=0;i<n.length;i++)n[i]!==e[i]&&t.push(i);return t}for(var r=Math.max(e.length,n.length),a=0;a<r;a++)t[a]=a;return t}(p,g),w=Math.max(g.length,p.length),b=0;b<w;b++)u+='<div id="num_'.concat(g[b],'" class="num" data-id="').concat(+g[b],'">').concat("positive"===v?d(p[b]):l(p[b]),"</div>");m.innerHTML="positive"===v?u:'<div class="negative">-</div>'.concat(u);var y=m.querySelectorAll(".num"),k=y[0].querySelector("span").offsetHeight;console.log("==========spanHeight:",k);for(var S=y.length,A=0;A<S;A++)h.includes(A)&&(y[A].querySelector("span").style.transform="translate(0, ".concat("up"===a?-.3:.3,"rem)"),y[A].querySelector("span").style.transition="all 0.5s ease-in-out")}}function d(n){return n>0&&n<9?"<span><i>".concat(n-1,"</i><i>").concat(n,"</i><i>").concat(+n+1,"</i></span>"):0==+n?"<span><i>9</i><i>0</i><i>1</i></span>":9==+n?"<span><i>8</i><i>9</i><i>0</i></span>":"firstNull"===n?"<span><i></i><i></i><i>1</i></span>":"firstOne"===n?"<span><i></i><i>1</i><i></i></span>":""}function l(n){return n>0&&n<9?"<span><i>".concat(+n+1,"</i><i>").concat(n,"</i><i>").concat(n-1,"</i></span>"):0==+n?"<span><i>1</i><i>0</i><i>9</i></span>":9==+n?"<span><i>0</i><i>9</i><i>8</i></span>":"firstNull"===n?"<span><i>1</i><i></i><i></i></span>":"firstOne"===n?"<span><i></i><i></i><i></i></span>":""}function u(){var t=e(".js-recommend"),r=".js-recommend .s-vote";function a(n,e){var r,a={added:["added","cancel-add"],subtracted:["subtracted","cancel-subtract"]};if((r=t.classList).remove.apply(r,i([].concat(a.subtracted,a.added))),setTimeout((function(){t.classList.add(a[n][e])}),0),"added"===n)return t.dataset.added=e?0:1,void(t.dataset.subtracted=0);"subtracted"===n&&(t.dataset.subtracted=e?0:1,t.dataset.added=0)}t.addEventListener("click",(function(e){var i=n(e.target,".s-up");if(i&&"0"===t.dataset.added)return a("added",0),void c({selector:r,num:+t.dataset.vote,direction:"up"});i&&"1"===t.dataset.added&&(a("added",1),c({selector:r,num:+t.dataset.vote+1,direction:"down"}))}),!1),t.addEventListener("click",(function(e){var i=n(e.target,".s-down");if(i&&"0"===t.dataset.subtracted)return a("subtracted",0),void c({selector:r,num:+t.dataset.vote,direction:"down"});i&&"1"===t.dataset.subtracted&&(a("subtracted",1),c({selector:r,num:+t.dataset.vote-1,direction:"up"}))}),!1)}function m(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n){var r='\n  <div class="widget-rec">\n    <div class="widget-rec-vote js-recommend" data-vote="'.concat(i,'" data-added="0" data-subtracted="0" >\n      <i class="s-up"></i><p class="s-vote">').concat(t(i),'</p><i class="s-down js-diss"></i>\n    </div>\n  </div>'),a=e(n);a&&(a.innerHTML=r,setTimeout((function(){u()}),1e3))}}a(".widget-rec {\n  position: relative;\n}\n.widget-rec-thanks {\n  position: absolute;\n  top: 0;\n  left: 0.3rem;\n  width: 3rem;\n  height: 1.6rem;\n  transform: translate(-50%, -100%);\n}\n.widget-rec-vote {\n  display: flex;\n  align-items: center;\n  max-width: 1.76rem;\n  margin: 0 0.15rem;\n}\n.widget-rec-vote .s-vote {\n  width: 0.66rem;\n  padding: 0 0.04rem;\n  text-align: center;\n  font-size: 0.24rem;\n  color: #666666;\n  font-weight: bold;\n  letter-spacing: -0.55px;\n  white-space: nowrap;\n}\n.widget-rec-vote .s-up {\n  background-image: url('https://static.ws.126.net/163/frontend/images/rolling/icon-rec.png');\n  width: 0.4rem;\n  height: 0.4rem;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.widget-rec-vote .s-down {\n  background-image: url('https://static.ws.126.net/163/frontend/images/rolling/icon-disrec.png');\n  width: 0.4rem;\n  height: 0.4rem;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.widget-rec-vote.added .s-vote {\n  color: #EE1A1A;\n}\n.widget-rec-vote.added .s-up {\n  background-image: url('https://static.ws.126.net/163/frontend/images/clicked-rec.png');\n  -webkit-animation: recommendAnimation 0.6s ease-in-out forwards;\n          animation: recommendAnimation 0.6s ease-in-out forwards;\n}\n.widget-rec-vote.subtracted .s-down {\n  background-image: url('https://static.ws.126.net/163/frontend/images/rolling/clicked-disrec.png');\n  -webkit-animation: recommendAnimation 0.6s ease-in-out forwards;\n          animation: recommendAnimation 0.6s ease-in-out forwards;\n}\n.widget-rec-vote.cancel-add .s-up {\n  -webkit-animation: recommendAnimation 0.5s ease-in-out forwards;\n          animation: recommendAnimation 0.5s ease-in-out forwards;\n}\n.widget-rec-vote.cancel-subtract .s-down {\n  -webkit-animation: recommendAnimation 0.5s ease-in-out forwards;\n          animation: recommendAnimation 0.5s ease-in-out forwards;\n}\n@-webkit-keyframes recommendAnimation {\n  0% {\n    transform: scale(0);\n  }\n  25% {\n    transform: scale(1.2);\n  }\n  50% {\n    transform: scale(0.9);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes recommendAnimation {\n  0% {\n    transform: scale(0);\n  }\n  25% {\n    transform: scale(1.2);\n  }\n  50% {\n    transform: scale(0.9);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n");export default m;
